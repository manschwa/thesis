% class options:
% - select either [german] or [english]
% - select the type of thesis from:
%   [bachelor, master, generic]
%   (in case of generic, use \type{} to specify it)
% - use option "alpha" for abbreviated citation (instead of numbers)
% - option "draft" is available, too
% - use options "utf8" or "latin1" to select inputencoding
\documentclass[german, master, latin1]{base/thesis}

\usepackage{units}    % useful for settings units:              \unit[23]{m}
\usepackage{nicefrac} % for setting fractions esp. within text: \nicefrac{km}{h}

\usepackage{minted}
\usepackage{algorithm, algorithmic}  % for pseudo code (cf. documentation)
\renewcommand{\algorithmiccomment}[1]{\qquad{\small // \textit{#1}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\title{Anbindung von Messaging-Systemen an Lernmanagementsysteme (am Beispiel von Stud.IP und Matrix)}
\author{Manuel Schwarz}
\email{manschwa@uos.de}
\firstSupervisor{Dr. Tobias Thelen}
\secondSupervisor{Prof. Dr. Elke Pulvermüller}
%\shorttitle{...}                       % by default = title
%\dept{...}                             % by default KBS UOS
%\submitdate{November 2004}             % by default current month & year
%\signcity{}                            % by default Osnabrück
%signline{Osnabrück, 11. Dezember 2004} % by default "signcity, submitdate"

\generatetitle

\cleardoublepage

\begin{prefacesection}{Zusammenfassung}
Die vorliegende Arbeit entstand in der Arbeitsgruppe Software Engineering
an der Universit"at Osnabrück im Bereich Webentwicklung
und befasst sich mit der Anbindung von Messaging-Systemen an Lernmanagementsysteme.
Kern der Arbeit ist die Erstellung und sinnvolle Umsetzung eines Anforderungskatalogs
für das oben genannte Thema am Beispiel der Messaging-Software Matrix und der Lernplattform Stud.IP\@.\\
Einleitend wird eine kurze Motivation des Themas gegeben.
Daraufhin folgt ein Grundlagenkapitel mit allen für diese Arbeit relevanten Hintergrundinformationen.
Die Anforderungsanalyse bildet das n"achste Kapitel, in dem die Erhebung sowie alle daraus entstandenen Anforderungen
aufgelistet und beschrieben werden.
Anschließend wird die Umsetzung der herausgearbeiteten Anforderungen im Implementationskapitel dargestellt.\\
Abschließend endet die Arbeit mit einer kurzen, größtenteils technischen Evaluation sowie einem Ausblick, der sich mit
möglichen Verbesserungen und Erweiterungen für den Praxiseinsatz besch"aftigt.

\end{prefacesection}

\cleardoublepage
\tableofcontents

\cleardoublepage
\listoffigures

\startTextChapters %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Motivation}
Lehren und Lernen im digitalen Zeitalter.\\
Moderne Kommunikationswege und - mittel studiumsunterstützend einsetzen.\\
Aktuelle Werkzeuge nutzen, um Studierenden eine möglichst niedrige
Einstiegsschwelle bei Fragen oder Unklarheiten zu bieten.\\
Fortw"ahrender Prozess der Weiterentwicklung und Anpassung der Vermittlung von Informationen.\\
Mailinglisten, Foren, Instant-Messenger \dots \\
Wie studiert man heute? Wie ist die durchschnittliche Nutzung der
Studierenden von WhatsApp und Co.? (Bezug auf die Studien)\\
Digitalisierung generell hervorheben, speziell in den vergangenen Corona- bzw.\ Digitalsemestern
noch einmal zus"atzlich an Relevanz gewonnen.\\




\chapter{Hintergrund}
Das folgende Kapitel befasst sich knapp mit den Grundlagen, die dieser Arbeit zu Grunde liegen.
Begonnen bei Lernmanagementsystemen und Messanging-Systemen, hin zu den konkreten Implementationen
Stud.IP und Matrix sowie Beispielen für die Anbindung anderer Fremdsysteme an die Lernplattform Stud.IP.

\section{Lernmanagementsysteme}
\label{sec:lms}
Lernmanagementsysteme, im Folgenden mit LMS abgekürzt, dienen der Unterstützung
von Lehr- und Lernprozessen im Kontext von E-Learning sowie der Verwaltung von
Lehrmaterialien und Nutzerdaten. Diese Online-Lernplattformen bilden an vielen Hochschulen aber auch anderen Institutionen
die Basis einer E-Learning-Infrastruktur.\\
Die Hauptfunktion, die ein LMS in der Regel erfüllt, ist die Organisation des Lehrbetriebs,
insbesondere das Anlegen von Veranstaltungen,
die Bereitstellung von Lerninhalten und die Kommunikation zwischen Lehrenden und Lernenden.\\
Definition nach Schulmeister \cite[S. 10]{Schulmeister:2005}:
Als Lernplattformen oder Learning Management Systeme werden im Unterschied zu bloßen Kollektionen
von Lehrskripten oder Hypertext-Sammlungen auf Webservern solche Software-Systeme bezeichnet,
die über folgende Funktionen verfügen:\\
\begin{itemize}
    \item{Eine Benutzerverwaltung (Anmeldung mit Verschlüsselung)}
    \item{Eine Kursverwaltung (Kurse, Verwaltung der Inhalte, Dateiverwaltung)}
    \item{Eine Rollen- und Rechtevergabe mit differenzierten Rechten}
    \item{Kommunikationsmethoden (Chat, Foren) und Werkzeuge für das Lernen (Whiteboard, Notizbuch, Annotationen, Kalender etc.)}
    \item {Die Darstellung der Kursinhalte, Lernobjekte und Medien in einem netzwerkfähigen Browser.}
\end{itemize}
\begin{figure}[htbp]
    \centering
    \includegraphics[width=300px]{images/lms.png}
    \caption[LMS Architektur]{LMS Architektur \cite[S. 11]{Schulmeister:2005}}
    \label{fig:lms}
\end{figure}
Die Abbildung~\ref{fig:lms} zeigt die Architektur eines idealtypischen LMS\@. Auf der Ebene der
Datenbasis bildet meist ein Content-Management-System die Grundlage der Datenverwaltung.
Neben Personen- und Kursdaten, können ebenso Lerninhalte archiviert, verteilt und wiederverwendet werden.\\
Darauf aufbauend ist es möglich je nach Bedarf interne sowie externe Schnittstellen zu anderen Systemen zu definieren.\\
Auf höchster Abstraktionsebene stellt das Diagramm drei Hauptkategorien der Nutzung dar. Zun"achst sollte es eine
administrative Ebene mit einer Nutzer-, Institutions-, und Kursverwaltung sowie der Option für Evaluationen geben.
Die zweite Kategorie repr"asentiert eine Lernumgebung mit ihren Werkzeugen und Kommunikationswegen. Der letzte Block beschreibt
das Authoring, dass die konkreten Lernobjekte, Aufgaben und Tests umfasst.\\

\section{Stud.IP}
Stud.IP ist eine Open Source Implementation eines LMS, dass Anfang der 2000er Jahre entwickelt wurde.
Mit ihren offenen Schnittstellen erlaubt diese digitale Lernplattform
die Integration von externen Systemen und Anwendungen zum Einsatz in der digitalen Lehre.
Neben Hochschulen gehören ebenfalls Schulen, Unternehmen,
Verb"ande und Behörden zu den Einsatzgebieten von Stud.IP\@.
Insgesamt gibt es derzeit ca\@. 70 Installationen mit ungef"ahr 600.000 Nutzerinnen und Nutzern (Quelle: studip.de).\\
Stud.IP versucht durch stetige Verbesserungen und Anpassungen den Anforderungen der sich
"andernden Gegebenheiten der digitalen Lehre gerecht zu werden. Dabei ist ein kontinuierlicher Dialog
zwischen Lehrenden, Lernenden sowie Entwicklern essentiell.\\
Stud.IP erfüllt alle im vorherigen Abschnitt~\ref{sec:lms} aufgeführten Anforderungen an ein LMS.\\
Neben einer ausgereiften Benutzer- und Kursverwaltung inklusive eines Rollen- und Rechtesystems,
existiert ebenfalls ein Forum und ein Chat zur Kommunikation sowie diverse Lernwerkzeuge (Etherpad, Wiki, Courseware, Vips).\\
Stud.IP verfügt über diverse Werkzeuge sowie Schnittstellen zur Integration von externen Systemen und Anwendungen.
Im Folgenden werden die für diese Arbeit relevanten Schnittstellen kurz beschrieben.\\

\subsection{Stud.IP Plugins}
\label{sec:plugins}
Die Lernplattform Stud.IP besitzt eine Plugin-Schnittstelle, mit dessen Hilfe das LMS um beliebige Funktionen
und Werkzeuge erweitert werden kann (Quelle: https://hilfe.studip.de/develop/Entwickler/PluginSchnittstelle).
Der Grund hierfür sind die mitunter sehr individuellen Anforderungen jedes Standorts, an dem Stud.IP betrieben wird.
Mit Hilfe von Plugins l"asst sich die Software bedarfsgenau konfigurieren ohne direkte "Anderungen am Kern-Programmcode
vornehmen zu müssen.\\
Plugins werden innerhalb von Stud.IP über den sogenannten Pluginmarktplatz bereitgestellt und
lassen sich als Administratior einfach installieren und aktivieren bzw.\ deinstallieren oder deaktivieren.\\
\begin{figure}[htbp]
    \centering
    \includegraphics[width=400px]{images/plugins_admin.png}
    \caption[Stud.IP Pluginverwaltung]{Stud.IP Pluginverwaltung}
    \label{fig:plugins-admin}
\end{figure}
Ein Ausschnitt der Administrationsoberfl"ache für die Pluginverwaltung ist in Abbildung~\ref{fig:plugins-admin} zu sehen.
Zus"atzlich zu dem Namen, der Version, dem Status und dem Aktionsmenü wird ebenfalls der Plugintyp angezeigt, von dem
es verschiedene gibt, worauf ich im Implementationsteil weiter eingehen werde. Hier sei nur kurz die Besonderheit von
Kern-Plugins erw"ahnt, die bereits bei der Standardinstallation von Stud.IP mitgeliefert und installiert werden.\\

\subsection{JSON:API}
\label{sec:json}
Die JSON:API ist eine Spezifikation, die Konventionen dafür festlegt,
wie ein Client den Abruf oder die Änderung von Ressourcen anfordert (Request)
und wie ein Server auf diese Anforderungen reagieren soll (Response).
Die allgemeine JSON:API-Spezifikation wurde entwickelt, um sowohl die Anzahl der Anfragen
als auch die Menge der zwischen Clients und Servern übertragenen Daten zu minimieren.
Dieses Effizienzziel wird erreicht, ohne die Lesbarkeit, Flexibilität oder Auffindbarkeit zu beeinträchtigen.
(Quelle: https://jsonapi.org/format/)\\
Stud.IP verfügt über eine solche JSON:API-Schnittstelle, welche die oben genannte allgemeine Spezifikation erfüllt und
mit deren Hilfe diverse Daten abgerufen sowie dem System hinzugefügt können.\\
Für Stud.IP existieren verschiedenste JSON:API-Routen, die unter folgender URI erreichbar sind:\\
\\
\texttt{https://<meine.studip.installation.de>/jsonapi.php/v1/<routen>}\\
\\
Ein Beispielaufruf zur Anforderung der Daten eines bestimmten Semester (eindeutigen ID) hat diese Form:\\
\\
\texttt{https://<meine.studip.installation.de>/jsonapi.php/v1/semester/<ID>}\\
\\
Die zugehörige Antwort im JSON-Format sieht wie folgt aus:
\inputminted[linenos=true]{json}{code/json_response.json}

Der Client bekommt die JSON-Repr"asentation eines Stud.IP-Semesters zurückgeliefert, welche
alle relevanten Daten der Objekts enth"alt.
Routen repr"asentieren die verschiedenen Stud.IP-Datenstrukturen und werden mit Hilfe einer
\texttt{RouteMap} von der angefragten URI auf den entsprechenden Programmcode abgebildet.
Die Abbildung~\ref{fig:jsonapi} stellt schemenhaft den Ablauf der Abarbeitung eines JSON:API-Requests dar.
\begin{figure}[htbp]
    \centering
    \includegraphics[width=400px]{images/jsonapi-flow.png}
    \caption[Stud.IP JSON:API Ablaufdiagramm]{Stud.IP JSON:API Ablaufdiagramm}
    \label{fig:jsonapi}
\end{figure}
Nach einem initialen Request folgt die bereits angesprochende Routen-Zuordnung, welche den Programmcode bestimmt,
der ausgeführt werden soll. Der Routen-Handler kümmert sich um eine JSON:API-konforme Antwort. Die folgende Schema-Zuordnung
legt fest welche Schemaklasse bestimmte Stud.IP-Objekte in JSON umwandeln kann. Im n"achsten Schritt wird eben dieses
Schema ausgew"ahlt, welches die konkrete Abbildung eines Stud.IP-Objekts in JSON definiert. Daraufhin kann die JSON:API-Antwort
an den Client gesendet werden.\\
(Quelle: https://hilfe.studip.de/develop/Entwickler/JSONAPI)\\

\subsection{Cronjobs}



\section{Anbindung von Fremdsystemen an Stud.IP}
Im Kontext des Lernmanagementsystems Stud.IP existieren mehrere Beispiele für die Anbindung
oder Einbettung von anderen Systemen an bzw.\ in die LMS-Software. Im Folgenden werden einige
Beispiele dafür aufgeführt.

\subsection{Meetings Plugin}
Meetings ist ein Stud.IP Videokonferenzplugin (Quelle github), das das LMS mit verschiedenen/unterschiedlichen
Videokonferenzsoftwarelösungen, wie z.B. BigBlueButton (Quelle bigbluebutton.org), verbindet.
Das Plugin ermöglicht es direkt aus einer Stud.IP-Veranstaltung heraus R"aume für z.B. Vorlesungen,
Webinare, Vortr"age oder Gruppenarbeiten anzulegen, denen die Teilnehmer*innen der Veranstaltung
beitreten können (dank der Rechteverwaltung in Stud.IP).
Weiterhin können auch externe Personen (ohne Stud.IP-Nutzerkonto) per Einladungslink an
Videokonferenzen teilnehmen.\\
- Kommunikation über Mikrofon und Kamera + Screen Sharing\\
- ideal für dezentrales Lernen und Arbeiten\\
- Möglichkeit von Aufzeichnungen\\
- Screenshot des "Raum erstellen" Dialogs mit all seinen Optionen, kurz darauf eingehen\\
\begin{figure}[htbp]
    \centering
    \includegraphics[width=400px]{images/meetings_dialog.jpeg}
    \caption[Meetings-Plugin: Dialog bei Raumerstellung]{Meetings-Plugin: Dialog bei Raumerstellung}
    \label{fig:meetings-dialog}
\end{figure}
- Funktionsweise kurz erl"autern -> Nutzen der BBB API\\
- BigBlueButton API zum erstellen eines Meetings (create):\\
\texttt{http://yourserver.com/bigbluebutton/api/create?[parameters]\&checksum=[checksum]}\\
\\
In Stud.IP direkt
\inputminted[linenos=true]{php}{code/meetings_performRequest.php}
\inputminted[linenos=true]{php}{code/meetings_getMeetingInfo.php}


\subsection{Etherpad Plugin}
Etherpad ist ein kollaborativer echtzeit Editor, der das gleichzeitige Editieren eines
Dokuments durch viele Nuter*innen erlaubt (Quelle github Repository).\\
- (Uni-) eigene Installation\\
- Integration/Einbettung vom Etherpad per iframe\\
- Optik anhand eines Screenshots zeigen\\
- Versionshistorie\\
- Veröffentlichungsfunktion, sodass das Pad auch außerhalb von Stud.IP per generiertem Link
zu erreichen ist\\
- beliebig viele Pads je Stud.IP Veranstaltung\\
- grob auf die Funktionsweise eingehen

\subsection{Moodle-Connect Plugin}
Mit Hilfe des Moodle-Connect Plugins lassen sich Veranstaltungen aus Stud.IP mit
Veranstaltungen des Lernmanagementsystems Moodle verknüpfen (Quelle github).\\
Genauer gesagt lassen sich Stud.IP Veranstaltungen auf Moodle Veranstaltungen abbilden.\\
- Veranstaltung aus Stud.IP wird in Moodle übernommen\\
- Übernahme der Teilnehmer\\
- Screenshot(s)\\
- Button in Stud.IP\\
- Funktionsweise (Moodle + Stud.IP konfigurieren, API Nutzung, Tokengenerierung)\\
- mit Till sprechen!

\subsection{LTI-Tools / Alija Plugin}
Dieses Plugin bietet einen einfachen Mechanismus für eine Weiterleitung in eine
externe Anwendung mit automatischer Anmeldung unter dem gleichen Account (Single-Sign-On) (Quelle svn Repo/Stud.IP Hilfe).
Unterstützt werden dabei LTI-Tools (Version 1.x der Schnittstelle) sowie
Stud.IP-Installationen (entweder über LTI oder das Alija-Protokoll).
Das Plugin kann auf Veranstaltungs- oder Einrichtungsebene aktiviert werden.
Ähnlich wie bei der "Freien Informationsseite" kann der Titel des Reiters sowie
ein freier Text angegeben werden, der den Nutzern zur Erläuterung angezeigt wird.

Als Gegenstück zu diesem Plugin benötigt man auf der anderen Seite entweder
ein mit dem LTI-Standard 1.x kompatibles LTI-Tool oder ein Stud.IP mit
dem StudipAuthLTI oder StudipAuthAlija Auth-Plugin.\\

- Screenshot\\
- Einbettung per iframe oder Verlinkung zur jeweiligen externen Anwendung.\\
- evtl.\ mit Elmar sprechen.

\section{Messenger}
Was ist das?
\subsection{Matrix}
Konkretes Beispiel eines Messenger-Backends.
\subsection{Matrix Schnittstellen}
https://matrix.org/docs/guides/client-server-api




\chapter{Anforderungsanalyse}
Kernpunkt der Arbeit, auf dem der Hintergrund und die Implementation aufbauen.
Empirischer Teil: Anforderungsanalyse mit Hilfe eines (Mini-) Fragebogens.

\section{Umfrage zur Anforderungsanalyse}
\begin{figure}[htbp]
    \centering
    \includegraphics[width=300px]{images/survey_distribution.png}
    \caption[Umfrage: Teilnehmendenverteilung]{Umfrage: Teilnehmendenverteilung}
    \label{fig:survey-distribution}
\end{figure}
Unterkapitel für jede herausgearbeitete Anforderung (funktional + nicht funktional).
\textbf{Support-Hotline-Raum}
Eine Support-Hotline-Funktion bei der man eine Gruppe von Personen erreichen kann,
um ein Anliegen zu besprechen und der Chat beendet wird, nach dem das Anliegen erledigt ist
bzw.\ nur der Kunde aus dem Chat entfernt wird.


\section{Grundsatzentscheidung}
Möglichkeit der beiden entwickelten Konzepte darstellen und die Entscheidung begründen.
Konzept 1: vollst"andige Bridge (möglichst voller Funktionsumfang) / eigener Client
- Aufwandsabsch"atzung, hohe Komplexit"at (element-web github Statistiken heranziehen)
- hoher Pflegeaufwand
- mit Element ist ein guter Client vorhanden, wieso alles nachbauen?
Konzept 2: Lose Kopplung, Anbindung statt Integration
- sinnvolle Diskussion, wie so eine Anbindung aussehen könnte
- zwei klar getrennte Systeme (Transparenz)
es wurden einige Anforderungen genannt, die nicht behandelt werden müssen, da diese bereits im Element-Client vorhanden sind
Nachrichten senden und empfangen (Basisfunktionen)
Übersichtliches UI
Klare Übersicht (Nachrichten und Bedienung) undabh"angig von OS/Browser/Screensize (Portabilit"at).
Gute Usability, wenig Klicks zum Bilden von Arbeitsgruppen, Direktchats, usw.\ und ein modernes Erscheinungsbild.
Matrix/Element in Blubber verlinken:
Chat/Matrix/Element-Icon in Blubber anzeigen, mit dem man zu dem Uni-Matrix/Element-Raum gelangt.
\textbf{Matrix als Hauptmessengingdienst}
Weg von Blubber. Entscheidung der Dozenten, was genutzt wird
Blubber abschalten, müssen die Betreiber entscheiden
\textbf{Stummschalten von (Veranstaltungs-) R"aumen}
In Stud.IP ist es bisher nicht vorgesehen einzelne Blubber-Nachrichten als gelesen zu markieren.



% TODO: Zusammenfassen von Anforderungen
\section{Anforderungen}
\subsection{Übernamhme von Veranstaltungsinformationen Veranstaltungen auf R"aume abbilden + Übernahme der Teilnehmendenlisten}
Kurse, Studengruppen, \dots sollten (automatisch) auf R"aume in Matrix abgebildet werden.\\
Reiter: Chat mit konfigurationseinstellungen
- nach Aktivierung nur für Doz und Tutoren sichtbar, die sollten die Erzeugung des Matrixraums anstoßen, nur, wenn eine Parametrisierung notwendig,
sonst mit Pluginaktivierung automatisch machen
- was passiert beim Löschen in Stud.IP und beim erneuten Anlegen?
- wenn Raum erzeugt wurde, ist der Reiter auch für Studierende sichtbar mit Anleitung (Einfach halten, "Platzhalter"), + Knopf für Profilerstellung/Übertragung zu Matrix

\subsection{Übernahme von Rollen, Rechten und Status}
Keine automatische Übernahme der Teilnehmerliste, Datenschutz, einzeln Übernahme anstoßen pro Teilnehmer, Sichtbarkeitseinstellungen
in Matrix nicht abbildbar. (mit Elmar sprechen!, Axel, Jens)
manuelle Nutzerverwaltung in Matrix sollte nicht genutzt werden, zwischen Doz und Tutoren nicht unterscheiden.
Userstatus spielt in der Praxis kaum eine Rolle. Synchen der User. User = autoren
Anbindung von Fremdsystemen mit einem anderen Rollen-Rechte-Konzept.
Feingranulare Berechtigungen für Studierende ist nur eingeschr"ankt umsetzbar, da es in Matrix nur 3 Rechtestufen gibt.
Denkbar w"are grob: Dozenten -> Moderator/Admin und Studierende -> Default.
In Matrix lassen sich zus"atzlich benutzerdefinierte Rechtestufen erstellen, eventuell lassen sich damit alle in Stud.IP
verfügbaren Rechtestufen abbilden.\\
Der eigene Status sollte leicht einzustellen sein oder aus Stud.IP übernommen werden (sichtbar/nicht sichtbar)
Man könnte in Matrix auch manuelle Rollen anlegen
Datenschutzaspekt: Ich möchte unsichtbar sein, in Matrix schwierig.
Datenschutzrechtliche Begründung, warum steht der Name der Studenten in der Raumliste?
beibehalten der Kommunikationskultur, keine anonymen Beitr"age möglich
in Matrix raumbezogene Einstellung: Teilnehmerliste ist sichtbar oder nicht
in synchronisierten Raeumen wir die Teilnehmerliste nicht angezeigt, kann Matrix das? Diskussion, was mache ich jetzt?
1. ich halte fest, es ist ein offenes Problem, Umsetzung trotz nicht datenschutzkonform
2. leute, die sich unsichtbar geschaltet haben, werden nicht mitsynchronisiert, die bekommen evtl nichts mehr mit
3. leute, die in min 1 VA unsichtbar sind -> mit Synonym sichtbar machen.
- jeder Student muss von Stud.IP aus seine Zustimmung geben, das weitergeben des Nutzers an Matrix aktivieren (ist das sinnvoll?)
gibt es Alternativen? ich sehe keinen guten Grund, das eine oder andere zu machen. -> Workshop mit Entwicklern und Didaktikern -> Ergebnisse
-> Aus technischer Sicht gibt es keinen Grund, das eine oder das andere zu nehmen, Workshop hat ergeben: folgendes Ergebnis
Beim Austragen oder aendern der Rechtestufe in Matrix synchron zu halten. -> Cronjob einmal stündlich
Lose Kopplung, nur einmal anlegen, was danach mit dem Raum passiert ist offen

\subsection{kein zus"atzliches Login}
Nur ein Login für beide Systeme/Dienste. Single Sign-On Stud.IP Nutzer sollten ohne zus"atzliches Login
in einen Matrix Raum gelangen können.

\subsection{Benachrichtigungsfunktion}
\textbf{Synchronizit"at}
Zum einen sollten Matrix und Blubber zeitlich synchron sein. Zum anderen w"are es wünschenswert, wenn
die in einem System als gelesen markierte Nachrichten auch im anderen System als gelesen markiert würden.

Man möchte in Matrix über relevante Ereignisse informiert werden. (-> sp"ater, was ist eigentlich relevant, Tabelle: Relevanzabsch"atzung für ereignisse,
was ist relevant für alle? persönliche Pr"aferenzen kann man mit dem hier entschiedenen Modell nicht berücksichtigen, deshalb
sind folgende
Konfiguration pro Veranstaltung sinnvoll? Welche Ereignisse sollen Erscheinen, oder nicht?Diskussion, was spricht dafür, was spricht dagegegen? 
Aus studentensicht evtl.\ verwirrend -> Agrument gegen Konfig.
Elmar oder Marcus -> Noftifications, wenn z.B. eine Datei hochgeladen wird. NotificationCenter::addOberver
Richtung Stud.IP -> Matrix, oder Matrix -> Stud.IP (nicht genannt, aber der Vollst"andigkeit halber dennoch genannt)
braucht man eine Konfigurationsmöglichkeit dafür?
wichtige Infos über die Kopplung hinweg.
Informationsveranstaltung mit uniübergreifenden Infos, denkbar.
(Eher ungeeignet, nach unten): unibezogene/veranstaltungsübergreifende Informationen, wie z.B. Rückmeldefristen, Unischließung, \dots
(dies w"are ein reiner Infochannel, in dem alle Studierenden sein müssten,
keine Antwortmöglichkeit -> one-way Kommunikation -> eMail/Stud.IP Benachrichtigung wie bisher ist da vielleicht besser)
Besser: veranstaltungsbezogene Informationen, z.B. "eine Datei wurde hochgeladen", "Termin f"allt aus"


\subsection{Transparenz}
(wird tendenziell nicht umgesetzt -> nur Konzept)
Verknüpfung zwischen Stud.IP und Matrix/Element deutlich machen.
Welche Konsequenzen hat das eigene Handeln in Matrix, wenn ich in Stud.IP etwas mache?
"Diese Aktion wird in Matrix erscheinen."
"Wie bekommen die Studierenden mit, dass es den Kanal gibt?" - Studierende sollten irgendwie informiert werden.
Reiter: Messenger -> Infos + Kurzanleitung + evtl. Konfiguration
Kann man deutlich machen, wie w"are es denn, wenn ich in Stud.IP sehen kann, wenn in Element etwas passiert.\
was heißt es eigenltich, wenn man zwei verschiedene Dienste hat?
Was soll wo passieren? Hochladen einer Datei -> Dialog: erscheint auch im Matrix-Kanal, Schalter (Analyse Idee, schreiben, nicht umsetzen)?
(Implementation: gibt Stud.IP)

\subsection{Direktnachrichten}
1-zu-1 Chats\\
- ist bereits in Matrix vorhanden, deshalb in der Umsetzung nicht vorgesehen
- man Könnte die Stud.IP Direktchats mit Matrix verbinden

\textbf{Sprechstundenfunktion} bei der man für eine kurze Zeit einen 1-zu-1 Chat
mit einer Person führt und den Chat danach auch automatisch verlässt.
Andere Personen sind in der Zeit in einer Warteschlange.

\subsection{mehrere R"aume pro Kurs}
(keine Umsetzung, nur Konzept)
Es sollten aus einer Stud.IP Veranstaltung mehrere Matrix-R"aume erstellt werden können, die dann als Community
zusammengefasst werden könnten.
Mögliche Erweiterung (sinnvoll oder nicht?)

\subsection{Kompatibilit"at von Nachrichten in Blubber und Matrix}
Stud.IP (Blubber) sollte als regul"arer Client agieren.\\
\textbf{Dateien versenden}
Verlinken von Inhalten in Stud.IP
Eventuell zu aufw"andig.\\
\textbf{Emoticons korrekt anzeigen}\\
\textbf{Nachrichten sollten editier- und löschbar sein}

\subsection{Übernahme des Stud.IP Profilbildes}
Personenbezogene Daten. Datenschutz. Sobald Matrixkopplung, dann auch Bild übertragen (im Reiter, s.o.), aktive Zustimmung
verweis auf Profil->Einstellungen->Privatsph"are->Eigenes Bild
Stud.IP: Wie darf mein Bild verwendet werden? "Darf auch extern angezeigt werden"
gibt die API das überhaupt her, kann man auch weglassen, wenn es aus Zeitgründen nicht mehr klappt

\subsection{Stautsindikator in Stud.IP}
(umsetzen)
Icon für Reiter in Stud.IP. objectsUserVisit Tabelle
- Wie viele Nachrichten gab es in Matrix seit dem letzten Besuch (Anzeige durch Icon + Tooltip + Benachrichtigung auf dem Reiter)
- SQL-Abfragen dauern evtl.\ lange, wenn das externe System nicht antwortet
- evtl nicht individuell pro Student, sondern: Wie viele Nachrichten gab es HEUTE, aktualisieren mit CronJob
- Diskussion, ob das sinnvoll ist

% nicht funktionale Anforderungen, die allerdings NICHT in der Anforderungsanalyse herausgefallen sind
\subsection{Opensource}

\subsection{Anbindung von Matrix durch ein Stud.IP-Plugin}
\label{sec:anf-plugin}
Eine der nicht funktionalen Anforderungen stellt somit die Anbindung des Matrix-Chats an Stud.IP
in Form eines Plugins dar. So kann jeder Standort für sich entscheiden, ob er diese Anbindung überhaupt installieren
und anbieten möchte.\\


\subsection{keine zus"atzliche API}

\subsection{Sicherheit}

\subsection{Robustheit, Ausfallsicherheit}
was passiert, wenn der Matrix Server für 3 Std.\ ausfaellt? Werden Messages gepuffert?
Implementation direkt über eine Que laufen lassen, DB mit Ergebnissen, die noch so Matrix geschickt werden müssen +
Cronjob 1x Std., gibt es noch Ereignisse, die nicht abgearbeitet wurden?
%Performance, woanders betrachten



\chapter{Implementation}
Hier die Anforderungskapitelüberschriften kopieren und Stück für Stück erörtern. Sinnhaftigkeit, Umsetzung,
Mögliche Umsetzung oder keine Umsetzung diskutieren.

\section{Übernamhme von Veranstaltungsinformationen Veranstaltungen auf R"aume abbilden + Übernahme der Teilnehmendenlisten}
Kurse, Studengruppen, \dots sollten (automatisch) auf R"aume in Matrix abgebildet werden.\\
Reiter: Chat mit konfigurationseinstellungen
- nach Aktivierung nur für Doz und Tutoren sichtbar, die sollten die Erzeugung des Matrixraums anstoßen, nur, wenn eine Parametrisierung notwendig,
sonst mit Pluginaktivierung automatisch machen
- was passiert beim Löschen in Stud.IP und beim erneuten Anlegen?
- wenn Raum erzeugt wurde, ist der Reiter auch für Studierende sichtbar mit Anleitung (Einfach halten, "Platzhalter"), + Knopf für Profilerstellung/Übertragung zu Matrix

\section{Übernahme von Rollen, Rechten und Status}
Keine automatische Übernahme der Teilnehmerliste, Datenschutz, einzeln Übernahme anstoßen pro Teilnehmer, Sichtbarkeitseinstellungen
in Matrix nicht abbildbar. (mit Elmar sprechen!, Axel, Jens)
manuelle Nutzerverwaltung in Matrix sollte nicht genutzt werden, zwischen Doz und Tutoren nicht unterscheiden.
Userstatus spielt in der Praxis kaum eine Rolle. Synchen der User. User = autoren
Anbindung von Fremdsystemen mit einem anderen Rollen-Rechte-Konzept.
Feingranulare Berechtigungen für Studierende ist nur eingeschr"ankt umsetzbar, da es in Matrix nur 3 Rechtestufen gibt.
Denkbar w"are grob: Dozenten -> Moderator/Admin und Studierende -> Default.
In Matrix lassen sich zus"atzlich benutzerdefinierte Rechtestufen erstellen, eventuell lassen sich damit alle in Stud.IP
verfügbaren Rechtestufen abbilden.\\
Der eigene Status sollte leicht einzustellen sein oder aus Stud.IP übernommen werden (sichtbar/nicht sichtbar)
Man könnte in Matrix auch manuelle Rollen anlegen
Datenschutzaspekt: Ich möchte unsichtbar sein, in Matrix schwierig.
Datenschutzrechtliche Begründung, warum steht der Name der Studenten in der Raumliste?
beibehalten der Kommunikationskultur, keine anonymen Beitr"age möglich
in Matrix raumbezogene Einstellung: Teilnehmerliste ist sichtbar oder nicht
in synchronisierten Raeumen wir die Teilnehmerliste nicht angezeigt, kann Matrix das? Diskussion, was mache ich jetzt?
1. ich halte fest, es ist ein offenes Problem, Umsetzung trotz nicht datenschutzkonform
2. leute, die sich unsichtbar geschaltet haben, werden nicht mitsynchronisiert, die bekommen evtl nichts mehr mit
3. leute, die in min 1 VA unsichtbar sind -> mit Synonym sichtbar machen.
- jeder Student muss von Stud.IP aus seine Zustimmung geben, das weitergeben des Nutzers an Matrix aktivieren (ist das sinnvoll?)
gibt es Alternativen? ich sehe keinen guten Grund, das eine oder andere zu machen. -> Workshop mit Entwicklern und Didaktikern -> Ergebnisse
-> Aus technischer Sicht gibt es keinen Grund, das eine oder das andere zu nehmen, Workshop hat ergeben: folgendes Ergebnis
Beim Austragen oder aendern der Rechtestufe in Matrix synchron zu halten. -> Cronjob einmal stündlich
Lose Kopplung, nur einmal anlegen, was danach mit dem Raum passiert ist offen

\section{kein zus"atzliches Login}
Nur ein Login für beide Systeme/Dienste. Single Sign-On Stud.IP Nutzer sollten ohne zus"atzliches Login
in einen Matrix Raum gelangen können.

\section{Benachrichtigungsfunktion}
\textbf{Synchronizit"at}
Zum einen sollten Matrix und Blubber zeitlich synchron sein. Zum anderen w"are es wünschenswert, wenn
die in einem System als gelesen markierte Nachrichten auch im anderen System als gelesen markiert würden.

Man möchte in Matrix über relevante Ereignisse informiert werden. (-> sp"ater, was ist eigentlich relevant, Tabelle: Relevanzabsch"atzung für ereignisse,
was ist relevant für alle? persönliche Pr"aferenzen kann man mit dem hier entschiedenen Modell nicht berücksichtigen, deshalb
sind folgende
Konfiguration pro Veranstaltung sinnvoll? Welche Ereignisse sollen Erscheinen, oder nicht?Diskussion, was spricht dafür, was spricht dagegegen? 
Aus studentensicht evtl.\ verwirrend -> Agrument gegen Konfig.
Elmar oder Marcus -> Noftifications, wenn z.B. eine Datei hochgeladen wird. NotificationCenter::addOberver
Richtung Stud.IP -> Matrix, oder Matrix -> Stud.IP (nicht genannt, aber der Vollst"andigkeit halber dennoch genannt)
braucht man eine Konfigurationsmöglichkeit dafür?
wichtige Infos über die Kopplung hinweg.
Informationsveranstaltung mit uniübergreifenden Infos, denkbar.
(Eher ungeeignet, nach unten): unibezogene/veranstaltungsübergreifende Informationen, wie z.B. Rückmeldefristen, Unischließung, \dots
(dies w"are ein reiner Infochannel, in dem alle Studierenden sein müssten,
keine Antwortmöglichkeit -> one-way Kommunikation -> eMail/Stud.IP Benachrichtigung wie bisher ist da vielleicht besser)
Besser: veranstaltungsbezogene Informationen, z.B. "eine Datei wurde hochgeladen", "Termin f"allt aus"


\section{Transparenz}
(wird tendenziell nicht umgesetzt -> nur Konzept)
Verknüpfung zwischen Stud.IP und Matrix/Element deutlich machen.
Welche Konsequenzen hat das eigene Handeln in Matrix, wenn ich in Stud.IP etwas mache?
"Diese Aktion wird in Matrix erscheinen."
"Wie bekommen die Studierenden mit, dass es den Kanal gibt?" - Studierende sollten irgendwie informiert werden.
Reiter: Messenger -> Infos + Kurzanleitung + evtl. Konfiguration
Kann man deutlich machen, wie w"are es denn, wenn ich in Stud.IP sehen kann, wenn in Element etwas passiert.\
was heißt es eigenltich, wenn man zwei verschiedene Dienste hat?
Was soll wo passieren? Hochladen einer Datei -> Dialog: erscheint auch im Matrix-Kanal, Schalter (Analyse Idee, schreiben, nicht umsetzen)?
(Implementation: gibt Stud.IP)

\section{Direktnachrichten}
1-zu-1 Chats\\
- ist bereits in Matrix vorhanden, deshalb in der Umsetzung nicht vorgesehen
- man Könnte die Stud.IP Direktchats mit Matrix verbinden

\textbf{Sprechstundenfunktion} bei der man für eine kurze Zeit einen 1-zu-1 Chat
mit einer Person führt und den Chat danach auch automatisch verlässt.
Andere Personen sind in der Zeit in einer Warteschlange.

\section{mehrere R"aume pro Kurs}
(keine Umsetzung, nur Konzept)
Es sollten aus einer Stud.IP Veranstaltung mehrere Matrix-R"aume erstellt werden können, die dann als Community
zusammengefasst werden könnten.
Mögliche Erweiterung (sinnvoll oder nicht?)

\section{Kompatibilit"at von Nachrichten in Blubber und Matrix}
Stud.IP (Blubber) sollte als regul"arer Client agieren.\\
\textbf{Dateien versenden}
Verlinken von Inhalten in Stud.IP
Eventuell zu aufw"andig.\\
\textbf{Emoticons korrekt anzeigen}\\
\textbf{Nachrichten sollten editier- und löschbar sein}

\section{Übernahme des Stud.IP Profilbildes}
Personenbezogene Daten. Datenschutz. Sobald Matrixkopplung, dann auch Bild übertragen (im Reiter, s.o.), aktive Zustimmung
verweis auf Profil->Einstellungen->Privatsph"are->Eigenes Bild
Stud.IP: Wie darf mein Bild verwendet werden? "Darf auch extern angezeigt werden"
gibt die API das überhaupt her, kann man auch weglassen, wenn es aus Zeitgründen nicht mehr klappt

\section{Stautsindikator in Stud.IP}
(umsetzen)
Icon für Reiter in Stud.IP. objectsUserVisit Tabelle
- Wie viele Nachrichten gab es in Matrix seit dem letzten Besuch (Anzeige durch Icon + Tooltip + Benachrichtigung auf dem Reiter)
- SQL-Abfragen dauern evtl.\ lange, wenn das externe System nicht antwortet
- evtl nicht individuell pro Student, sondern: Wie viele Nachrichten gab es HEUTE, aktualisieren mit CronJob
- Diskussion, ob das sinnvoll ist

% nicht funktionale Anforderungen, die allerdings NICHT in der Anforderungsanalyse herausgefallen sind
\section{Opensource}

\section{Anbindung von Matrix durch ein Stud.IP-Plugin}
Wie bereits im Anforderungskapitel~\ref{sec:anf-plugin} angesprochen soll die Anbindung von Matrix an Stud.IP
mit Hilfe eines Plugins erfolgen, was die Option des direkten Einbaus in den Kern-Programmcode von vorn herein
ausschließt.\\
Für die Implementation sind somit grunds"atzlich zwei Varianten denkbar. Die erste Variante w"are die
Umsetzung in einem Plugin und die zweite Variante w"aren mehrere Plugins, die anschließend interagieren.
Wie bereits in Abbildung~\ref{fig:plugins-admin} zu sehen war, existieren in Stud.IP verschiedene Typen
von Plugins, wobei ein konkretes Plugin mehrere Typen haben kann. Der Typ \texttt{StandardPlugin}
ermöglicht es zum Beispiel eigene Navigationspunkte in Veranstaltungen bzw. Einrichtungen anzuzeigen.
Allerdings wird dieser Plugintyp auch nur im Veranstaltungs- und Einrichtungskontext geladen.
Das heißt auf der Startseite oder im globalen Adminbereich steht es nicht zur Verfügung und es lassen sich
dort auch keine Konfigurationen vornehmen. Deshalb kann es nötig sein, dass ein Plugin mehrere Typen besitzt.\\
Die verschiedenen Typen werden durch Interfaces repr"asentiert und können durch die jeweilige
Plugin-Klasse implementiert werden. Aufgrund dieser verschiedenen Plugintypen kann es sinnvoll sein
mehrere statt nur ein einziges Plugin für eine neue Funktion zu implementieren.\\

Die Vorteile einer solchen eher modularisierteren Implementation durch mehrere Plugins sind die bessere
Übersichtlichkeit, der Programmcode kann strukturierter aufgebaut werden und eine Wiederverwendung ist
gegebenenfalls einfacher.
- Beispiel: Schwarzes Brett (https://gitlab.studip.de/uol/plugins/SchwarzesBrettPlugin/-/blob/master/plugin.manifest)
CODE: Pluginmanifest
- mehrere Plugins können im Manifest zusammengefasst werden
- hier könnte man folgendes auslagern: Adminkonfiguration, NotificationCenter



\section{keine zus"atzliche API}
Die Vorhandenen APIs von Stud.IP sowie Matrix können genutzt werden.

\section{Sicherheit}

\section{Robustheit, Ausfallsicherheit}
was passiert, wenn der Matrix Server für 3 Std.\ ausfaellt? Werden Messages gepuffert?
Implementation direkt über eine Que laufen lassen, DB mit Ergebnissen, die noch so Matrix geschickt werden müssen +
Cronjob 1x Std., gibt es noch Ereignisse, die nicht abgearbeitet wurden?
%Performance, woanders betrachten




\chapter{Evaluation}
Da vermutlich keine Zeit für eine empirische Evaluation mit einem IRL Test + Umfrage bleibt,
werden hier technische Tests hinreichen müssen.

\section{Technische Tests}
\subsection{Unit-Tests}
Testbeschreibung
\subsection{Code Coverage}
\section{Chancen}
\section{Probleme}


\chapter{Ausblick}
Potentielle Nutzung in der Zukunft und Weiterentwicklung?


\newpage
Beispieltext. Siehe auch \cite{Schulmeister:2005, Besl:1992, Thrun:2000}.
URLs gehen auch: \cite{your-study}.

% DON'T set \bibliographystyle here -- use the documentclass option instead
\bibliography{papers}

\closing %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
